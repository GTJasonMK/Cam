# 功能扩展机会分析（仅分析版）

【输入】
- scope：分析范围（默认全仓库；可指定模块/页面/接口/命令）。
- target_users：目标用户与场景（可留空，默认由仓库推断）。
- report_path：报告路径（默认 `.conversations/reports/feature-expansion-analysis-report.md`）。
- acceptance_criteria：必须包含功能地图、痛点清单、≥5 个候选、Top 1-3 选择理由、3-7 步执行计划。
- constraints：时间预算、不可触碰范围、是否允许改公共 API、是否允许新增依赖。

【需要完成的功能】
- 仅做功能扩展分析：盘点现有能力、识别体验痛点、输出扩展候选与执行计划（不改代码）。

【注意事项】
- 通用分析基线（必须）：先范围与 baseline→再结论与方案→最后验证设计；最多追问 3 个阻塞问题；每条 `acceptance_criteria` 必须有证据；至少覆盖 3 个高风险边界；按【输出】原样输出。
- 默认从仓库推断入口命令、关键模块、核心链路与可用验证方式。
- 候选优先“高频路径、明显提效、低学习成本”；每条痛点与方案必须附证据。
- 能跑就跑探测命令并留痕；不能跑写阻塞原因与可信度影响。
- 报告必须落盘到 `report_path`，并在结尾回写路径与摘要。

【输出】
- 扫描结论（技术栈、入口命令、关键模块、可用验证方式）。
- 已有功能地图（按用户任务或业务链路分层）。
- 用户体验痛点清单（P0/P1/P2：位置/影响/证据）。
- 功能扩展候选池（至少 5 项：收益/成本/风险/依赖）。
- 优先级决策（Top 1-3：入选理由与淘汰理由）。
- 扩展路线图（不超过 3 阶段，含收益/风险/工作量）。
- 功能扩展执行计划（3-7 步：目标/影响面/验证方式/回滚点）。
- 验证清单（验证路线图与执行计划可行性）。
- 分析报告（已保存路径 + 报告摘要）。
- 验收映射表（acceptance_criteria → 证据 → 结论）。
- 机器可读摘要（JSON）：{"status":"success|partial|blocked","scope":[],"key_findings":[],"evidence":[],"risks":[],"next_actions":[]}。

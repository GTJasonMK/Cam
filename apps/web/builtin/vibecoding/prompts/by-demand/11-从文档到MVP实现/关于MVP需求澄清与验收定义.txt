# MVP 需求澄清与验收定义（仅分析版）

【输入】
- source_doc_path：简单需求文档路径（必填，如 `E:\Code\CampusHelpATW\项目思想.txt`）。
- scope：MVP 范围（可留空；默认由文档与仓库现状推断）。
- target_users：目标用户与核心场景（可留空）。
- report_path：报告路径（默认 `.conversations/reports/mvp-requirements-clarification-report.md`）。
- acceptance_criteria：至少包含“问题定义、MVP 边界、可测试验收标准、非目标、关键风险”。
- constraints：时间预算、不可触碰范围、是否允许改公共 API、是否允许新增依赖。

【需要完成的功能】
- 仅做需求澄清：基于文档与仓库现状，补全可执行的 MVP 需求定义与验收口径（不改代码）。

【注意事项】
- 通用分析基线（必须）：先确认目标与约束（≤3 行）→扫描文档与仓库事实→输出可执行需求定义；最多追问 3 个阻塞问题；每条 `acceptance_criteria` 必须映射证据；按【输出】原样输出。
- 充分利用 CLI Agent 默认能力：自动识别技术栈、入口命令、关键模块；不要要求用户额外提供目录树或技术细节。
- 避免冗余：只保留“目标、验收、约束、风险、下一步”五类信息；不要重复讲解仓库扫描过程。
- 验收标准必须可测试（可量化指标或 Given/When/Then），并显式区分“做什么”和“不做什么”。
- 能跑就跑探测命令并留痕；不能跑写阻塞原因与可信度影响。
- 报告必须落盘到 `report_path`，并在结尾回写路径与摘要。

【输出】
- 输入完整性检查（缺失项与补全假设）。
- 现状基线（文档关键信息、仓库相关能力、约束边界）。
- MVP 目标与非目标（必须分开列出）。
- 用户故事与关键流程（最多 3 条核心路径）。
- MVP 功能清单（Must/Should/Could，含取舍理由）。
- 验收标准清单（逐条可验证，含验证方式）。
- 风险与假设（技术/产品/交付，附缓解动作）。
- 下一步执行建议（进入“实施计划制定”所需输入）。
- 分析报告（已保存路径 + 报告摘要）。
- 验收映射表（acceptance_criteria → 证据 → 结论）。
- 机器可读摘要（JSON）：{"status":"success|partial|blocked","scope":[],"mvp_goals":[],"non_goals":[],"acceptance":[],"risks":[],"next_actions":[]}。

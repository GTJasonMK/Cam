# 修复结果回归审查（仅审查版）

【输入】
- scope：审查范围（模块/目录/接口/页面）。
- report_path：报告路径（默认 `.conversations/reports/bug-fix-regression-review-report.md`）。
- execution_handoff_path：执行步骤交接文件路径（如 `.conversations/pipeline-handoffs/<pipeline_id>/step2-handoff.json`）。
- acceptance_criteria：至少包含“问题关闭状态、回归风险、阻塞项、复审结论”。
- constraints：审查深度、时间预算、是否允许运行验证命令。
- （可留空）handoff_output_dir：默认 `.conversations/pipeline-handoffs/<pipeline_id>/`。

【需要完成的功能】
- 仅做修复结果回归审查：核对缺陷修复是否真实关闭且关键功能不回退（不改代码）。

【注意事项】
- 通用审查基线（必须）：先扫描事实→再分级问题→最后给结论；最多追问 3 个阻塞问题；每条 `acceptance_criteria` 必须有证据；按【输出】原样输出。
- 严格单一职责：仅审查不改代码。
- 必须读取 `execution_handoff_path`，无法读取时先输出阻塞原因与修复动作。
- 逐条核对“问题编号 → 改动点 → 验证证据”，重点检查 P0/P1 与关键边界。
- 报告必须落盘到 `report_path`；如提供 `handoff_output_dir`，结束时写 `step-summary.md` 与 `step-handoff.json`。

【输出】
- 扫描结论（审查范围、输入来源、可用命令、可信度说明）。
- 问题清单（P0/P1/P2：位置/影响/证据/修复建议/验证方式）。
- 问题关闭清单（问题编号 → 关闭状态 → 证据）。
- 回归风险清单（功能/稳定性/性能/兼容性）。
- 验证清单（已执行命令 + 结果摘要；未执行项手工步骤）。
- 审查报告（已保存路径 + 报告摘要）。
- 复审结论（通过/需整改后复审/阻塞）。
- 流水线交接文件（若提供 `handoff_output_dir`：`step-summary.md` + `step-handoff.json`）。
- 验收映射表（acceptance_criteria → 证据 → 结论）。
- 机器可读摘要（JSON）：{"status":"success|partial|blocked","scope":[],"closed_items":[],"regression_risks":[],"next_actions":[]}。
